
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../model_transfers/">
      
      
        <link rel="next" href="../mpe_model/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.41">
    
    
      
        <title>Model - MkDocs PVT-thermal-performance-model</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#model_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MkDocs PVT-thermal-performance-model" class="md-header__button md-logo" aria-label="MkDocs PVT-thermal-performance-model" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MkDocs PVT-thermal-performance-model
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Model
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../general/" class="md-tabs__link">
        
  
    
  
  General

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../heat_transfer/" class="md-tabs__link">
        
  
    
  
  Heat transfer

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../model_ht/" class="md-tabs__link">
        
  
    
  
  Model heat transfer

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../model_temperatures/" class="md-tabs__link">
        
  
    
  
  Model temperatures

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../model_transfers/" class="md-tabs__link">
        
  
    
  
  Model transfers

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Model

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../mpe_model/" class="md-tabs__link">
        
  
    
  
  Model MPE

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../plot_functions_here/" class="md-tabs__link">
        
  
    
  
  Plot functions

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../proc/" class="md-tabs__link">
        
  
    
  
  Proc

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MkDocs PVT-thermal-performance-model" class="md-nav__button md-logo" aria-label="MkDocs PVT-thermal-performance-model" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MkDocs PVT-thermal-performance-model
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../heat_transfer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Heat transfer
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_ht/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model heat transfer
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_temperatures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model temperatures
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_transfers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model transfers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Model
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Model
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.Biot" class="md-nav__link">
    <span class="md-ellipsis">
      Biot
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.Cp" class="md-nav__link">
    <span class="md-ellipsis">
      Cp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.Fp" class="md-nav__link">
    <span class="md-ellipsis">
      Fp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.KTE_Bt" class="md-nav__link">
    <span class="md-ellipsis">
      KTE_Bt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.KTE_tf" class="md-nav__link">
    <span class="md-ellipsis">
      KTE_tf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.S" class="md-nav__link">
    <span class="md-ellipsis">
      S
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.S_star" class="md-nav__link">
    <span class="md-ellipsis">
      S_star
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.X_celltemp" class="md-nav__link">
    <span class="md-ellipsis">
      X_celltemp
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.a0" class="md-nav__link">
    <span class="md-ellipsis">
      a0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.a1" class="md-nav__link">
    <span class="md-ellipsis">
      a1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.a2" class="md-nav__link">
    <span class="md-ellipsis">
      a2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.a3" class="md-nav__link">
    <span class="md-ellipsis">
      a3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.ab_f" class="md-nav__link">
    <span class="md-ellipsis">
      ab_f
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.b" class="md-nav__link">
    <span class="md-ellipsis">
      b
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.b1" class="md-nav__link">
    <span class="md-ellipsis">
      b1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.b2" class="md-nav__link">
    <span class="md-ellipsis">
      b2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.b3" class="md-nav__link">
    <span class="md-ellipsis">
      b3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.b4" class="md-nav__link">
    <span class="md-ellipsis">
      b4
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.d1" class="md-nav__link">
    <span class="md-ellipsis">
      d1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.d2" class="md-nav__link">
    <span class="md-ellipsis">
      d2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.d3" class="md-nav__link">
    <span class="md-ellipsis">
      d3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.d4" class="md-nav__link">
    <span class="md-ellipsis">
      d4
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.e0" class="md-nav__link">
    <span class="md-ellipsis">
      e0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.e1" class="md-nav__link">
    <span class="md-ellipsis">
      e1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.e2" class="md-nav__link">
    <span class="md-ellipsis">
      e2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.e3" class="md-nav__link">
    <span class="md-ellipsis">
      e3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.e4" class="md-nav__link">
    <span class="md-ellipsis">
      e4
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.eta_PV" class="md-nav__link">
    <span class="md-ellipsis">
      eta_PV
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.f0" class="md-nav__link">
    <span class="md-ellipsis">
      f0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.gamma0int" class="md-nav__link">
    <span class="md-ellipsis">
      gamma0int
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.gamma1int" class="md-nav__link">
    <span class="md-ellipsis">
      gamma1int
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.gamma_0_int" class="md-nav__link">
    <span class="md-ellipsis">
      gamma_0_int
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.j" class="md-nav__link">
    <span class="md-ellipsis">
      j
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.m" class="md-nav__link">
    <span class="md-ellipsis">
      m
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.one_loop" class="md-nav__link">
    <span class="md-ellipsis">
      one_loop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model.simu_one_steady_state" class="md-nav__link">
    <span class="md-ellipsis">
      simu_one_steady_state
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mpe_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model MPE
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plot_functions_here/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot functions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../proc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proc
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="model_1">Model</h1>


<div class="doc doc-object doc-module">



<a id="model"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="model.Biot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">Biot</span><span class="p">(</span><span class="n">lambd</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the Biot number</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lambd</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thickness of the material [m]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thermal conductivity of the material [W/m/K]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>h</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>heat transfer coefficient [W/m2/K]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delta</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width [m]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Biot number</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">Biot</span><span class="p">(</span><span class="n">lambd</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">delta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the Biot number</span>

<span class="sd">    Args:</span>
<span class="sd">        lambd (float): thickness of the material [m]</span>
<span class="sd">        k (float): thermal conductivity of the material [W/m/K]</span>
<span class="sd">        h (float): heat transfer coefficient [W/m2/K]</span>
<span class="sd">        delta (float): width [m]</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Biot number&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">lambd</span><span class="o">*</span><span class="n">h</span><span class="p">)</span><span class="o">/</span><span class="n">k</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">lambd</span><span class="o">/</span><span class="n">delta</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.Cp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">Cp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">hyp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the specific heat capacity of the fluid and stores it in var["Cp"]</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hyp</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the hypotheses</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">Cp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the specific heat capacity of the fluid and stores it in var[&quot;Cp&quot;]</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>
<span class="sd">        hyp (dict): dictionary containing the hypotheses</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">T_m</span> <span class="o">=</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;T_fluid_in&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;T_fluid_out&quot;</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span> <span class="c1"># K</span>

    <span class="n">p_fluid</span> <span class="o">=</span> <span class="n">hyp</span><span class="p">[</span><span class="s2">&quot;p_fluid&quot;</span><span class="p">]</span> <span class="c1"># bar</span>
    <span class="n">fluid</span> <span class="o">=</span> <span class="n">hyp</span><span class="p">[</span><span class="s2">&quot;fluid&quot;</span><span class="p">]</span>
    <span class="n">glycol_rate</span> <span class="o">=</span> <span class="n">hyp</span><span class="p">[</span><span class="s2">&quot;glycol_rate&quot;</span><span class="p">]</span> <span class="c1"># %</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Cp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PropsSI</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="n">p_fluid</span><span class="o">*</span><span class="mi">100000</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">T_m</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;INCOMP::</span><span class="si">{</span><span class="n">fluid</span><span class="si">}</span><span class="s1">[</span><span class="si">{</span><span class="n">glycol_rate</span><span class="si">}</span><span class="s1">]&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.Fp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">Fp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the Fp factor and stores it in var["Fp"]</p>
<p>$$F_p = rac{1}{a_3 R_{inter}+h_{rad}R_{inter}+1}$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters    </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">Fp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the Fp factor and stores it in var[&quot;Fp&quot;]</span>

<span class="sd">    $$F_p = \frac{1}{a_3 R_{inter}+h_{rad}R_{inter}+1}$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters    </span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>


    <span class="n">R_inter</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_inter&quot;</span><span class="p">]</span>

    <span class="n">h_rad</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad&quot;</span><span class="p">]</span>
    <span class="n">a3</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a3&quot;</span><span class="p">]</span>

    <span class="n">Fp</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">a3</span><span class="o">*</span><span class="n">R_inter</span><span class="o">+</span><span class="n">h_rad</span><span class="o">*</span><span class="n">R_inter</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Fp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Fp</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.KTE_Bt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">KTE_Bt</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates Ka_Bt, Th_Bt, and Ep_Bt factors and stores them in var["Ka_Bt"], var["Th_Bt"], and var["Ep_Bt"]</p>
<p>$$
g_1 = (l_c/R_{inter})<em>(F'-1)</em>b_1
g_2 = (l_c/R_{inter})<em>(F'-1)</em>b_2
g_3 = (l_c/R_{inter})<em>(F'-1)</em>b_3
g_4 = (l_c/R_{inter})<em>(F'-1)</em>b_4
g_5 = l_c<em>F'</em>S^{*}</p>
<p>h_1 = (-iota/R_b)<em>b_1
h_2 = (-iota/R_b)</em>b_2
h_3 = (iota/R_b)<em>(1-b_3)
h_4 = (-iota/R_b)</em>b_4
h_5 = 0</p>
<p>i_1 = -2k_{abs}\lambda_{abs}m       anh(mL_{af})(b_1/j)
i_2 = -2k_{abs}\lambda_{abs}m       anh(mL_{af})b_2
i_3 = -2k_{abs}\lambda_{abs}m       anh(mL_{af})b_3
i_4 = -2k_{abs}\lambda_{abs}m       anh(mL_{af})b_4
i_5 = 2k_{abs}\lambda_{abs}m        anh(mL_{af})(b/j)</p>
<p>\kappa_{Bt} = g_2+h_2+i_2
    heta_{Bt} = -(g_1+h_1+i_1)
\epsilon_{Bt} = (g_3+h_3+i_3)<em>T_{back} + (g_4+h_4+i_4)</em>T_{sky} + (g_5+h_5+i_5)<br />
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">KTE_Bt</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates Ka_Bt, Th_Bt, and Ep_Bt factors and stores them in var[&quot;Ka_Bt&quot;], var[&quot;Th_Bt&quot;], and var[&quot;Ep_Bt&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    g_1 = (l_c/R_{inter})*(F&#39;-1)*b_1</span>
<span class="sd">    g_2 = (l_c/R_{inter})*(F&#39;-1)*b_2</span>
<span class="sd">    g_3 = (l_c/R_{inter})*(F&#39;-1)*b_3</span>
<span class="sd">    g_4 = (l_c/R_{inter})*(F&#39;-1)*b_4</span>
<span class="sd">    g_5 = l_c*F&#39;*S^{*}</span>

<span class="sd">    h_1 = (-iota/R_b)*b_1</span>
<span class="sd">    h_2 = (-iota/R_b)*b_2</span>
<span class="sd">    h_3 = (iota/R_b)*(1-b_3)</span>
<span class="sd">    h_4 = (-iota/R_b)*b_4</span>
<span class="sd">    h_5 = 0</span>

<span class="sd">    i_1 = -2k_{abs}\lambda_{abs}m\tanh(mL_{af})(b_1/j)</span>
<span class="sd">    i_2 = -2k_{abs}\lambda_{abs}m\tanh(mL_{af})b_2</span>
<span class="sd">    i_3 = -2k_{abs}\lambda_{abs}m\tanh(mL_{af})b_3</span>
<span class="sd">    i_4 = -2k_{abs}\lambda_{abs}m\tanh(mL_{af})b_4</span>
<span class="sd">    i_5 = 2k_{abs}\lambda_{abs}m\tanh(mL_{af})(b/j)</span>

<span class="sd">    \kappa_{Bt} = g_2+h_2+i_2</span>
<span class="sd">    \theta_{Bt} = -(g_1+h_1+i_1)</span>
<span class="sd">    \epsilon_{Bt} = (g_3+h_3+i_3)*T_{back} + (g_4+h_4+i_4)*T_{sky} + (g_5+h_5+i_5)  </span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lambd_abs</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;lambd_abs&quot;</span><span class="p">]</span>
    <span class="n">k_abs</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;k_abs&quot;</span><span class="p">]</span>
    <span class="n">W</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;W&quot;</span><span class="p">]</span>
    <span class="n">L_af</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;L_af&quot;</span><span class="p">]</span>
    <span class="n">l_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;l_B&quot;</span><span class="p">]</span>
    <span class="n">l_c</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;l_c&quot;</span><span class="p">]</span>
    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube&quot;</span><span class="p">];</span><span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">R_inter</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_inter&quot;</span><span class="p">]</span>

    <span class="n">R_b</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_2&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_back&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_back&quot;</span><span class="p">])</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>

    <span class="n">T_sky</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_sky&quot;</span><span class="p">]</span>
    <span class="n">T_amb</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_amb&quot;</span><span class="p">]</span>
    <span class="n">T_back</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_back&quot;</span><span class="p">]</span>

    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>

    <span class="c1">#T_PV = var[&quot;T_PV&quot;]</span>
    <span class="n">h_rad</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad&quot;</span><span class="p">]</span>
    <span class="n">S</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span>
    <span class="n">Fprime</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Fp&quot;</span><span class="p">]</span>

    <span class="n">j</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;j&quot;</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;m&quot;</span><span class="p">]</span> 

    <span class="n">iota</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;iota&quot;</span><span class="p">]</span>

    <span class="c1"># K = b2 * ( -D_tube*Fprime*((l_c/D_tube)*(h_rad+1/R_t)+(iota/D_tube)/(R_b*Fprime))-2*k_abs*lambd_abs*m*math.tanh(m*L_af) )</span>
    <span class="c1"># T = b1 * ( D_tube*Fprime*((l_c/D_tube)*(h_rad+1/R_t)+(iota/D_tube)/(R_b*Fprime))+2*k_abs*lambd_abs*m*math.tanh(m*L_af))</span>
    <span class="c1"># E = D_tube*Fprime*((l_c/D_tube)*(S+h_rad*T_sky+T_amb/R_t)+((iota/D_tube)*(1-b3)*T_back)/(R_b*Fprime))+2*k_abs*lambd_abs*m*math.tanh(m*L_af)*((b/j) - b3*T_back) + (l_c/R_t)*(Fprime-1)*b3*T_back</span>

    <span class="n">b1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span>
    <span class="n">b2</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b2&quot;</span><span class="p">]</span>
    <span class="n">b3</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b3&quot;</span><span class="p">]</span>
    <span class="n">b4</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b4&quot;</span><span class="p">]</span>

    <span class="c1"># T_PV - T_B </span>
    <span class="c1"># if stepConditions[&quot;compt&quot;] &lt;=2:</span>
    <span class="c1">#     g4 = l_c*Fprime*(S+h_rad*T_sky+T_amb/R_t)</span>
    <span class="c1">#     g3 = (l_c/R_inter)*(Fprime-1)*b3</span>
    <span class="c1">#     g2 = (l_c/R_inter)*(Fprime-1)*b2</span>
    <span class="c1">#     g1 = (l_c/R_inter)*(Fprime-1)*b1</span>
    <span class="c1"># else:</span>
    <span class="c1">#     T_abs = var[&quot;T_abs_mean&quot;]</span>
    <span class="c1">#     g4 = l_c*(S+h_rad*T_sky+T_amb/R_t + T_abs/R_inter)</span>
    <span class="c1">#     g3 = -(l_c/R_inter)*b3</span>
    <span class="c1">#     g2 = -(l_c/R_inter)*b2</span>
    <span class="c1">#     g1 = -(l_c/R_inter)*b1</span>

    <span class="n">S_star</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S_star&quot;</span><span class="p">]</span>


    <span class="n">g5</span> <span class="o">=</span> <span class="n">l_c</span><span class="o">*</span><span class="n">Fprime</span><span class="o">*</span><span class="n">S_star</span>
    <span class="n">g4</span> <span class="o">=</span> <span class="p">(</span><span class="n">l_c</span><span class="o">/</span><span class="n">R_inter</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Fprime</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">b4</span>
    <span class="n">g3</span> <span class="o">=</span> <span class="p">(</span><span class="n">l_c</span><span class="o">/</span><span class="n">R_inter</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Fprime</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">b3</span>
    <span class="n">g2</span> <span class="o">=</span> <span class="p">(</span><span class="n">l_c</span><span class="o">/</span><span class="n">R_inter</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Fprime</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">b2</span>
    <span class="n">g1</span> <span class="o">=</span> <span class="p">(</span><span class="n">l_c</span><span class="o">/</span><span class="n">R_inter</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Fprime</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">b1</span>

    <span class="c1"># T_B - T_back</span>
    <span class="n">h5</span> <span class="o">=</span> <span class="mf">0.</span>
    <span class="n">h4</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">iota</span><span class="o">/</span><span class="n">R_b</span><span class="p">)</span><span class="o">*</span><span class="n">b4</span>
    <span class="n">h3</span> <span class="o">=</span> <span class="p">(</span><span class="n">iota</span><span class="o">/</span><span class="n">R_b</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">b3</span><span class="p">)</span>
    <span class="n">h2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">iota</span><span class="o">/</span><span class="n">R_b</span><span class="p">)</span><span class="o">*</span><span class="n">b2</span>
    <span class="n">h1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">iota</span><span class="o">/</span><span class="n">R_b</span><span class="p">)</span><span class="o">*</span><span class="n">b1</span>

    <span class="c1"># 2q&#39;_absfin</span>
    <span class="n">i5</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">k_abs</span><span class="o">*</span><span class="n">lambd_abs</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">L_af</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="n">j</span><span class="p">)</span>
    <span class="n">i4</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">k_abs</span><span class="o">*</span><span class="n">lambd_abs</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">L_af</span><span class="p">)</span><span class="o">*</span><span class="n">b4</span>
    <span class="n">i3</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">k_abs</span><span class="o">*</span><span class="n">lambd_abs</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">L_af</span><span class="p">)</span><span class="o">*</span><span class="n">b3</span>
    <span class="n">i2</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">k_abs</span><span class="o">*</span><span class="n">lambd_abs</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">L_af</span><span class="p">)</span><span class="o">*</span><span class="n">b2</span>
    <span class="n">i1</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">k_abs</span><span class="o">*</span><span class="n">lambd_abs</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">L_af</span><span class="p">)</span><span class="o">*</span><span class="n">b1</span>

    <span class="n">K</span> <span class="o">=</span>  <span class="n">g2</span><span class="o">+</span><span class="n">h2</span><span class="o">+</span><span class="n">i2</span>
    <span class="n">T</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">g1</span><span class="o">+</span><span class="n">h1</span><span class="o">+</span><span class="n">i1</span><span class="p">)</span>
    <span class="n">E</span> <span class="o">=</span> <span class="p">(</span><span class="n">g3</span><span class="o">+</span><span class="n">h3</span><span class="o">+</span><span class="n">i3</span><span class="p">)</span><span class="o">*</span><span class="n">T_back</span> <span class="o">+</span> <span class="p">(</span><span class="n">g4</span><span class="o">+</span><span class="n">h4</span><span class="o">+</span><span class="n">i4</span><span class="p">)</span><span class="o">*</span><span class="n">T_sky</span> <span class="o">+</span> <span class="p">(</span><span class="n">g5</span><span class="o">+</span><span class="n">h5</span><span class="o">+</span><span class="n">i5</span><span class="p">)</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ka_Bt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">K</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Th_Bt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ep_Bt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">E</span> 
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.KTE_tf" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">KTE_tf</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates Ka_tf, Th_tf, and Ep_tf factors and stores them in var["Ka_tf"], var["Th_tf"], and var["Ep_tf"]</p>
<p>$$
\kappa_{tf} = rac{d_2}{\chi R_B} + rac{d_0}{\chi^2} - rac{1}{\chi}
$$</p>
<p>$$
    heta_{tf} = 1 - rac{d_1}{\chi R_B}
$$</p>
<p>$$
\epsilon_{tf} = rac{d_3}{\chi R_B}T_{back} + rac{d_4}{\chi R_B}T_{sky} + rac{d_1}{\chi R_B}T_{back} + rac{d_0\gamma}{\chi}T_{back}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">KTE_tf</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates Ka_tf, Th_tf, and Ep_tf factors and stores them in var[&quot;Ka_tf&quot;], var[&quot;Th_tf&quot;], and var[&quot;Ep_tf&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    \kappa_{tf} = \frac{d_2}{\chi R_B} + \frac{d_0}{\chi^2} - \frac{1}{\chi}</span>
<span class="sd">    $$</span>

<span class="sd">    $$</span>
<span class="sd">    \theta_{tf} = 1 - \frac{d_1}{\chi R_B}</span>
<span class="sd">    $$</span>

<span class="sd">    $$</span>
<span class="sd">    \epsilon_{tf} = \frac{d_3}{\chi R_B}T_{back} + \frac{d_4}{\chi R_B}T_{sky} + \frac{d_1}{\chi R_B}T_{back} + \frac{d_0\gamma}{\chi}T_{back}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Ka_Bt</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ka_Bt&quot;</span><span class="p">]</span>
    <span class="n">Th_Bt</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Th_Bt&quot;</span><span class="p">]</span>
    <span class="n">Ep_Bt</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ep_Bt&quot;</span><span class="p">]</span>

    <span class="n">b1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span>
    <span class="n">b2</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b2&quot;</span><span class="p">]</span>
    <span class="n">b3</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b3&quot;</span><span class="p">]</span>
    <span class="n">b4</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b4&quot;</span><span class="p">]</span>

    <span class="n">d0</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d1&quot;</span><span class="p">]</span>
    <span class="n">d2</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d2&quot;</span><span class="p">]</span>
    <span class="n">d3</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d3&quot;</span><span class="p">]</span>
    <span class="n">d4</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d4&quot;</span><span class="p">]</span>

    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube&quot;</span><span class="p">];</span><span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>
    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="n">R_B</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">C_B</span><span class="o">+</span><span class="n">p_ext_tube_rad</span><span class="o">*</span><span class="n">h_rad_tube_abs</span><span class="p">)</span>
    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>
    <span class="n">chi</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">h_fluid</span><span class="o">*</span><span class="n">p_int_tube</span><span class="p">)</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

    <span class="n">T_sky</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_sky&quot;</span><span class="p">]</span>
    <span class="n">T_back</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_back&quot;</span><span class="p">]</span>

    <span class="c1"># var[&quot;Ka_tf&quot;] = Ka_Bt - (gamma*b2)/c3</span>
    <span class="c1"># var[&quot;Th_tf&quot;] = 1/c3 + gamma*b1 + Th_Bt</span>
    <span class="c1"># var[&quot;Ep_tf&quot;] = Ep_Bt + gamma*(1-b3)*T_back</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ka_tf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d1</span><span class="o">*</span><span class="n">b2</span> <span class="o">+</span> <span class="n">d2</span> <span class="o">+</span> <span class="n">Ka_Bt</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Th_tf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">d1</span><span class="o">*</span><span class="n">b1</span> <span class="o">+</span> <span class="n">Th_Bt</span>
    <span class="c1"># calcul : puis test avec changement des signes ci-dessus</span>
    <span class="c1">#     var[&quot;Th_tf&quot;] = 1 - d1*b1 + Th_Bt</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ep_tf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ep_Bt</span> <span class="o">+</span> <span class="p">(</span><span class="n">d1</span><span class="o">*</span><span class="n">b3</span> <span class="o">+</span> <span class="n">d3</span><span class="p">)</span> <span class="o">*</span> <span class="n">T_back</span> <span class="o">+</span> <span class="p">(</span><span class="n">d1</span><span class="o">*</span><span class="n">b4</span> <span class="o">+</span> <span class="n">d4</span><span class="p">)</span> <span class="o">*</span> <span class="n">T_sky</span> 

    <span class="c1"># var[&quot;Ka_tf&quot;] = (d0*b2)/(chi*R_B) + (d0/chi**2) - 1/chi</span>
    <span class="c1"># var[&quot;Th_tf&quot;] = 1 - (d0*b1)/(chi*R_B)</span>
    <span class="c1"># var[&quot;Ep_tf&quot;] = ( (d0*b3)/(chi*R_B) + (d0*gamma)*chi )*T_back</span>

    <span class="c1"># tentative de correction</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ka_tf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ka_Bt&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b2&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e2&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">gamma</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">])</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Th_tf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Th_Bt&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">gamma</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">])</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ep_tf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ep_Bt&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">gamma</span> <span class="o">-</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b3&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e3&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">gamma</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]))</span> <span class="o">*</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_back&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b4&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e4&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">gamma</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]))</span> <span class="o">*</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_sky&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.S" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">S</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the net absorbed solar radiation (total absorbed - PV power production) and stores it in var["S"]</p>
<p>$$
S =         au_{    heta}G(1-\eta_{PV})
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">S</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the net absorbed solar radiation (total absorbed - PV power production) and stores it in var[&quot;S&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    S = \tau_{\theta}G(1-\eta_{PV})</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">tau_g</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;tau_g&quot;</span><span class="p">]</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span>

    <span class="c1">#T_PV = var[&quot;T_PV&quot;]</span>
    <span class="n">eta_PV</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;eta_PV&quot;</span><span class="p">]</span>

    <span class="n">S</span> <span class="o">=</span> <span class="n">tau_g</span><span class="o">*</span><span class="n">G</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">eta_PV</span><span class="p">)</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">S</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.S_star" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">S_star</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the $S^{*}$ factor and stores it in var["S_star"]</p>
<p>$$S^{*} = S - a_2 + h_{rad}T_{sky}$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    None</p>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">S_star</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the $S^{*}$ factor and stores it in var[&quot;S_star&quot;]</span>

<span class="sd">    $$S^{*} = S - a_2 + h_{rad}T_{sky}$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S_star&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a2&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_sky&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.X_celltemp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">X_celltemp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the X_celltemp factor and stores it in var["X_celltemp"]</p>
<p>$$X_{celltemp} = 1+\Eff_{T}(T_{PV}-T_{ref})$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">X_celltemp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the X_celltemp factor and stores it in var[&quot;X_celltemp&quot;]</span>

<span class="sd">    $$X_{celltemp} = 1+\Eff_{T}(T_{PV}-T_{ref})$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Eff_T</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;Eff_T&quot;</span><span class="p">]</span>
    <span class="n">T_ref</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;T_ref&quot;</span><span class="p">]</span>

    <span class="n">T_PV</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;T_PV&quot;</span><span class="p">]</span>

    <span class="n">X</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="n">Eff_T</span><span class="o">*</span><span class="p">(</span><span class="n">T_PV</span><span class="o">-</span><span class="n">T_ref</span><span class="p">)</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;X_celltemp&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">X</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.a0" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">a0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the a0 factor and stores it in var["a0"]</p>
<p>$$a_0 = rac{1}{h_{top}+h_{rad}+1/R_g}\left(lpha_g G + h_{top} T_{amb} + h_{rad} T_{sky}
ight)$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">a0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the a0 factor and stores it in var[&quot;a0&quot;]</span>

<span class="sd">    $$a_0 = \frac{1}{h_{top}+h_{rad}+1/R_g}\left(\alpha_g G + h_{top} T_{amb} + h_{rad} T_{sky}\right)$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_top_g&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_g&quot;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_g&quot;</span><span class="p">]))</span><span class="o">*</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;alpha_g&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_top_g&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_amb&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_g&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_sky&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.a1" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">a1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the a1 factor and stores it in var["a1"]</p>
<p>$$a_1 = rac{1}{h_{top}+h_{rad}+1/R_g}\left(rac{1}{R_g}
ight)$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">a1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the a1 factor and stores it in var[&quot;a1&quot;]</span>

<span class="sd">    $$a_1 = \frac{1}{h_{top}+h_{rad}+1/R_g}\left(\frac{1}{R_g}\right)$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_top_g&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_g&quot;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_g&quot;</span><span class="p">]))</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_g&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.a2" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">a2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the a2 factor and stores it in var["a2"]</p>
<p>$$a_2 = -rac{a_0}{R_g}$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    None</p>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">a2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the a2 factor and stores it in var[&quot;a2&quot;]</span>

<span class="sd">    $$a_2 = -\frac{a_0}{R_g}$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a0&quot;</span><span class="p">]</span><span class="o">/</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_g&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.a3" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">a3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the a3 factor and stores it in var["a3"]</p>
<p>$$a_3 = (1-a_1) rac{1}{R_g}$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">a3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the a3 factor and stores it in var[&quot;a3&quot;]</span>

<span class="sd">    $$a_3 = (1-a_1) \frac{1}{R_g}$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">a1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a1&quot;</span><span class="p">]</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">a1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_g&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.ab_f" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ab_f</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the a_f and b_f factors and stores them in var["a_f"] and var["b_f"]</p>
<p>$$
a_f = rac{N_{harp}}{\dot{m}C_p}rac{\kappa_{tf}}{  heta_{tf}}
$$</p>
<p>$$
b_f = rac{N_{harp}}{\dot{m}C_p}rac{\epsilon_{tf}}{        heta_{tf}}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ab_f</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the a_f and b_f factors and stores them in var[&quot;a_f&quot;] and var[&quot;b_f&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    a_f = \frac{N_{harp}}{\dot{m}C_p}\frac{\kappa_{tf}}{\theta_{tf}}</span>
<span class="sd">    $$</span>

<span class="sd">    $$</span>
<span class="sd">    b_f = \frac{N_{harp}}{\dot{m}C_p}\frac{\epsilon_{tf}}{\theta_{tf}}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">N_harp</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;N_harp&quot;</span><span class="p">]</span>
    <span class="n">mdot</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;mdot&quot;</span><span class="p">]</span>
    <span class="n">Cp</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Cp&quot;</span><span class="p">]</span>

    <span class="n">Ka_tf</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ka_tf&quot;</span><span class="p">]</span>
    <span class="n">Th_tf</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Th_tf&quot;</span><span class="p">]</span>
    <span class="n">Ep_tf</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Ep_tf&quot;</span><span class="p">]</span>

    <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">N_harp</span><span class="o">/</span><span class="p">(</span><span class="n">mdot</span><span class="o">*</span><span class="n">Cp</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">Ka_tf</span><span class="o">/</span><span class="n">Th_tf</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">N_harp</span><span class="o">/</span><span class="p">(</span><span class="n">mdot</span><span class="o">*</span><span class="n">Cp</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">Ep_tf</span><span class="o">/</span><span class="n">Th_tf</span><span class="p">)</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;a_f&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b_f&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.b" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">b</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the b factor and stores it in var["b"]</p>
<p>$$
b = S+h_{rad}T_{sky}+rac{T_{amb}}{R_t}+rac{T_{back}}{R_bF'}+rac{h_{rad,f}T_{tube,mean}}{F'}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">b</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the b factor and stores it in var[&quot;b&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    b = S+h_{rad}T_{sky}+\frac{T_{amb}}{R_t}+\frac{T_{back}}{R_bF&#39;}+\frac{h_{rad,f}T_{tube,mean}}{F&#39;}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">T_back</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_back&quot;</span><span class="p">]</span>
    <span class="n">R_b</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_2&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_back&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_back&quot;</span><span class="p">])</span>

    <span class="n">h_rad</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad&quot;</span><span class="p">]</span>
    <span class="n">S</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">]</span>
    <span class="n">Fprime</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Fp&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="c1"># if h_rad_tube_abs != 0:</span>
    <span class="c1">#     T_tube_mean = var[&quot;T_tube_mean&quot;]</span>
    <span class="c1">#     b = S+h_rad*T_sky+T_amb/R_t+T_back/(R_b*Fprime) + (h_rad_tube_abs*T_tube_mean)/Fprime</span>
    <span class="c1"># else:</span>
    <span class="c1">#     b = S+h_rad*T_sky+T_amb/R_t+T_back/(R_b*Fprime)</span>

    <span class="c1"># b = S+h_rad*T_sky+T_amb/R_t+T_back/(R_b*Fprime)</span>

    <span class="n">S_star</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;S_star&quot;</span><span class="p">]</span>

    <span class="n">b</span> <span class="o">=</span> <span class="n">S_star</span> <span class="o">+</span> <span class="n">T_back</span><span class="o">/</span><span class="p">(</span><span class="n">R_b</span><span class="o">*</span><span class="n">Fprime</span><span class="p">)</span>


    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_2&quot;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">gamma_int</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;gamma_2_int&quot;</span><span class="p">]</span>

        <span class="n">b</span> <span class="o">+=</span> <span class="p">(</span><span class="n">gamma_int</span><span class="o">*</span><span class="n">T_back</span><span class="p">)</span><span class="o">/</span><span class="n">Fprime</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.b1" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">b1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the b1 factor and stores it in var["b1"]</p>
<p>$$
b_1 = rac{1}{C_B + h_{rad,f}p_{ext,tube,rad}}rac{1}{1-c_2}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">b1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the b1 factor and stores it in var[&quot;b1&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    b_1 = \frac{1}{C_B + h_{rad,f}p_{ext,tube,rad}}\frac{1}{1-c_2}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>  
    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">e1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span>
    <span class="n">f0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;f0&quot;</span><span class="p">]</span>
    <span class="c1"># print(&#39;b1&#39;)</span>
    <span class="c1"># print(&#39;e1&#39;,e1)</span>
    <span class="c1"># print(&#39;gamma&#39;,gamma)</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">C_B</span> <span class="o">+</span> <span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span> <span class="o">-</span> <span class="n">f0</span><span class="o">*</span><span class="n">e1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.b2" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">b2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the b2 factor and stores it in var["b2"]</p>
<p>$$
b_2 = rac{1}{c_0\chi}rac{1}{1-c_2}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">b2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the b2 factor and stores it in var[&quot;b2&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    b_2 = \frac{1}{c_0\chi}\frac{1}{1-c_2}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">f0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;f0&quot;</span><span class="p">]</span>
    <span class="n">e2</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e2&quot;</span><span class="p">]</span>
    <span class="n">b1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f0</span><span class="o">*</span><span class="n">e2</span><span class="o">*</span><span class="n">b1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.b3" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">b3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the b3 factor and stores it in var["b3"]</p>
<p>$$
b_3 = -rac{1}{C_B + h_{rad,f}p_{ext,tube,rad}}\gamma
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">b3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the b3 factor and stores it in var[&quot;b3&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    b_3 = -\frac{1}{C_B + h_{rad,f}p_{ext,tube,rad}}\gamma</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>  
    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

    <span class="n">e3</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e3&quot;</span><span class="p">]</span>
    <span class="n">f0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;f0&quot;</span><span class="p">]</span>
    <span class="c1"># c&#39;est vrifi c&#39;est gal</span>
    <span class="c1"># var[&quot;b3&quot;] = (-1/(C_B + h_rad_tube_abs*p_ext_tube_rad))*gamma</span>
    <span class="c1"># var[&quot;b3&quot;] =  (-1/(C_B + h_rad_tube_abs*p_ext_tube_rad))*gamma</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f0</span><span class="o">*</span><span class="n">e3</span> <span class="o">-</span> <span class="n">gamma</span><span class="p">)</span><span class="o">*</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.b4" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">b4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the b4 factor and stores it in var["b4"]</p>
<p>$$b_4 = b_1(f_0e_4 - h_{rad,tube,sky})$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">b4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the b4 factor and stores it in var[&quot;b4&quot;]</span>

<span class="sd">    $$b_4 = b_1(f_0e_4 - h_{rad,tube,sky})$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">b1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b1&quot;</span><span class="p">]</span>
    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>
    <span class="n">h_rad_tube_sky</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span>
    <span class="n">p_tube_sky</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]</span>

    <span class="n">e4</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e4&quot;</span><span class="p">]</span>
    <span class="n">f0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;f0&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;b4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">b1</span><span class="o">*</span><span class="p">(</span><span class="n">f0</span><span class="o">*</span><span class="n">e4</span> <span class="o">-</span> <span class="n">h_rad_tube_sky</span><span class="o">*</span><span class="n">p_tube_sky</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.d1" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">d1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the d1 factor and stores it in var["d1"]</p>
<p>$$
d_1 = rac{1}{c_0\chi}rac{1}{1-c_2}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">d1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the d1 factor and stores it in var[&quot;d1&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    d_1 = \frac{1}{c_0\chi}\frac{1}{1-c_2}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">d0</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>
    <span class="n">chi</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">h_fluid</span><span class="o">*</span><span class="n">p_int_tube</span><span class="p">)</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">e1</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span>

    <span class="c1"># var[&quot;d1&quot;] = (-gamma*d0)/R_B + h_rad_tube_abs*(1-(d0/R_B))</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">e1</span><span class="o">*</span><span class="p">(</span><span class="n">gamma</span><span class="o">+</span><span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span><span class="p">)</span> <span class="o">+</span> <span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.d2" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">d2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the d2 factor and stores it in var["d2"]</p>
<p>$$
d_2 = rac{1}{c_0\chi}rac{1}{1-c_2}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">d2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the d2 factor and stores it in var[&quot;d2&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    d_2 = \frac{1}{c_0\chi}\frac{1}{1-c_2}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">d0</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>
    <span class="n">chi</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">h_fluid</span><span class="o">*</span><span class="n">p_int_tube</span><span class="p">)</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="c1"># var[&quot;d2&quot;] = (-gamma*d0)/chi - (h_rad_tube_abs*d0)/chi</span>

    <span class="n">e2</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e2&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">e2</span><span class="o">*</span><span class="p">(</span><span class="n">gamma</span><span class="o">+</span><span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.d3" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">d3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the d3 factor and stores it in var["d3"]</p>
<p>$$
d_3 = rac{1}{c_0\chi}rac{1}{1-c_2}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">d3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the d3 factor and stores it in var[&quot;d3&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    d_3 = \frac{1}{c_0\chi}\frac{1}{1-c_2}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">d0</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>
    <span class="n">chi</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">h_fluid</span><span class="o">*</span><span class="n">p_int_tube</span><span class="p">)</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="c1"># var[&quot;d3&quot;] = -gamma**2*d0 + gamma - (h_rad_tube_abs*d0)/(1/gamma)</span>

    <span class="n">e3</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e3&quot;</span><span class="p">]</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">e3</span><span class="o">*</span><span class="p">(</span><span class="n">gamma</span><span class="o">+</span><span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span><span class="p">)</span> <span class="o">+</span> <span class="n">gamma</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.d4" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">d4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the d4 factor and stores it in var["d4"]</p>
<p>$$d_4 = rac{1}{c_0\chi}rac{1}{1-c_2}$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">d4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the d4 factor and stores it in var[&quot;d4&quot;]</span>

<span class="sd">    $$d_4 = \frac{1}{c_0\chi}\frac{1}{1-c_2}$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
    <span class="n">p_ext_tube_rad</span>  <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="c1"># var[&quot;d3&quot;] = -gamma**2*d0 + gamma - (h_rad_tube_abs*d0)/(1/gamma)</span>

    <span class="n">e4</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e4&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;d4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">e4</span><span class="o">*</span><span class="p">(</span><span class="n">gamma</span> <span class="o">+</span> <span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.e0" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">e0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the e0 factor and stores it in var["e0"]</p>
<p>$$
c_0 = rac{1}{R_{inter}}+rac{1}{R_bF'}+rac{h_{rad,f}}{F'}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">e0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the e0 factor and stores it in var[&quot;e0&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    c_0 = \frac{1}{R_{inter}}+\frac{1}{R_bF&#39;}+\frac{h_{rad,f}}{F&#39;}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>
    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>   
    <span class="n">chi</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">h_fluid</span><span class="o">*</span><span class="n">p_int_tube</span><span class="p">)</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_sky</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span>
    <span class="n">p_tube_sky</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]</span>

    <span class="c1"># vrifier l&#39;homognit</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">chi</span> <span class="o">+</span> <span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span> <span class="o">+</span> <span class="n">C_B</span> <span class="o">+</span> <span class="n">gamma</span> <span class="o">+</span> <span class="n">h_rad_tube_sky</span><span class="o">*</span><span class="n">p_tube_sky</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.e1" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">e1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the e1 factor and stores it in var["e1"]</p>
<p>$$
e_1 = rac{C_B+p_{ext,tube,rad}h_{rad,f}}{c_0}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">e1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the e1 factor and stores it in var[&quot;e1&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    e_1 = \frac{C_B+p_{ext,tube,rad}h_{rad,f}}{c_0}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>
    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="n">e0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">e0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">C_B</span><span class="o">+</span><span class="n">p_ext_tube_rad</span><span class="o">*</span><span class="n">h_rad_tube_abs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.e2" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">e2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the e2 factor and stores it in var["e2"]</p>
<p>$$
e_2 = rac{1}{c_0\chi}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables </p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">e2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the e2 factor and stores it in var[&quot;e2&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    e_2 = \frac{1}{c_0\chi}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables </span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">p_int_tube</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_int_tube&quot;</span><span class="p">]</span>
    <span class="n">h_fluid</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_fluid&quot;</span><span class="p">]</span>
    <span class="n">chi</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">h_fluid</span><span class="o">*</span><span class="n">p_int_tube</span><span class="p">)</span>

    <span class="n">e0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">e0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">chi</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.e3" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">e3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the e3 factor and stores it in var["e3"]</p>
<p>$$
e_3 = rac{\gamma}{c_0}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">e3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the e3 factor and stores it in var[&quot;e3&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    e_3 = \frac{\gamma}{c_0}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

    <span class="n">e0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">e0</span><span class="p">)</span><span class="o">*</span><span class="n">gamma</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.e4" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">e4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the e4 factor and stores it in var["e4"]</p>
<p>$$e_4 = rac{1}{c_0}h_{rad,tube,sky}$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">e4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the e4 factor and stores it in var[&quot;e4&quot;]</span>

<span class="sd">    $$e_4 = \frac{1}{c_0}h_{rad,tube,sky}$$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">e0</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e0&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_sky</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span>
    <span class="n">p_tube_sky</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;e4&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">e0</span><span class="p">)</span><span class="o">*</span><span class="n">h_rad_tube_sky</span><span class="o">*</span><span class="n">p_tube_sky</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.eta_PV" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eta_PV</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the PV efficiency and stores it in var["eta_PV"]</p>
<p>$$
\eta_{PV} = \eta_{nom}X_{celltemp}X_{rad}X_{corr}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the PVT parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">eta_PV</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the PV efficiency and stores it in var[&quot;eta_PV&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    \eta_{PV} = \eta_{nom}X_{celltemp}X_{rad}X_{corr}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the PVT parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">eta_nom</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;eta_nom&quot;</span><span class="p">]</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">]</span>
    <span class="n">X_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;X_rad&quot;</span><span class="p">]</span>
    <span class="n">X_corr</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;X_corr&quot;</span><span class="p">]</span>

    <span class="n">X_celltemp</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;X_celltemp&quot;</span><span class="p">]</span>

    <span class="n">eta</span> <span class="o">=</span> <span class="n">eta_nom</span><span class="o">*</span><span class="n">X_celltemp</span><span class="o">*</span><span class="n">X_rad</span><span class="o">*</span><span class="n">X_corr</span>
    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;eta_PV&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">eta</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.f0" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">f0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the f0 factor and stores it in var["f0"]</p>
<p>$$
f_0 = C_B + h_{rad,f}p_{ext,tube,rad} + \gamma
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">f0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the f0 factor and stores it in var[&quot;f0&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    f_0 = C_B + h_{rad,f}p_{ext,tube,rad} + \gamma</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">C_B</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;C_B&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>
    <span class="n">p_ext_tube_rad</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_ext_tube_rad&quot;</span><span class="p">]</span>

    <span class="n">h_rad_tube_sky</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_sky&quot;</span><span class="p">]</span>
    <span class="n">p_tube_sky</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;p_tube_sky&quot;</span><span class="p">]</span>

    <span class="n">gamma</span> <span class="o">=</span> <span class="n">calc_gamma</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;f0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">C_B</span> <span class="o">+</span> <span class="n">h_rad_tube_abs</span><span class="o">*</span><span class="n">p_ext_tube_rad</span> <span class="o">+</span> <span class="n">gamma</span> <span class="o">+</span> <span class="n">h_rad_tube_sky</span><span class="o">*</span><span class="n">p_tube_sky</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.gamma0int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gamma0int</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">L_fin</span><span class="p">,</span> <span class="n">lambd</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">delta_int</span><span class="p">,</span> <span class="n">L_tube</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the gamma_0_int factor and returns it</p>
<p>$$
\gamma_{0,int} = rac{lpha}{\lambda}rac{\sinh(lpha L_{fin}/\lambda)+etalpha/\lambda\cosh(lpha L_{fin}/\lambda)}{\cosh(lpha L_{fin}/\lambda)+eta\sinh(lpha L_{fin}/\lambda)}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>N</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of fins</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>L_fin</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>length of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lambd</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thickness of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thermal conductivity of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delta</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delta_int</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>contact length between the fin and the tube</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>L_tube</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>length of the tube</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>h</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>heat transfer coefficient</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Bi</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Biot number</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>gamma_0_int</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>gamma_0_int factor</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gamma0int</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">L_fin</span><span class="p">,</span><span class="n">lambd</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">delta</span><span class="p">,</span><span class="n">delta_int</span><span class="p">,</span><span class="n">L_tube</span><span class="p">,</span><span class="n">h</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the gamma_0_int factor and returns it</span>

<span class="sd">    $$</span>
<span class="sd">    \gamma_{0,int} = \frac{\alpha}{\lambda}\frac{\sinh(\alpha L_{fin}/\lambda)+\beta\alpha/\lambda\cosh(\alpha L_{fin}/\lambda)}{\cosh(\alpha L_{fin}/\lambda)+\beta\sinh(\alpha L_{fin}/\lambda)}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        N (int): number of fins</span>
<span class="sd">        L_fin (float): length of the fin</span>
<span class="sd">        lambd (float): thickness of the fin</span>
<span class="sd">        k (float): thermal conductivity of the fin</span>
<span class="sd">        delta (float): width of the fin</span>
<span class="sd">        delta_int (float): contact length between the fin and the tube</span>
<span class="sd">        L_tube (float): length of the tube</span>
<span class="sd">        h (float): heat transfer coefficient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Bi (float): Biot number</span>
<span class="sd">        gamma_0_int (float): gamma_0_int factor&quot;&quot;&quot;</span>

    <span class="n">Bi</span> <span class="o">=</span> <span class="n">Biot</span><span class="p">(</span><span class="n">lambd</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">delta</span><span class="p">)</span>

    <span class="n">alpha</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">Bi</span><span class="p">)</span>
    <span class="n">beta</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Bi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">lambd</span><span class="o">/</span><span class="n">delta</span><span class="p">))</span>
    <span class="n">arg</span> <span class="o">=</span> <span class="p">(</span><span class="n">alpha</span><span class="o">*</span><span class="n">L_fin</span><span class="p">)</span><span class="o">/</span><span class="n">lambd</span>

    <span class="n">numerateur</span> <span class="o">=</span> <span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="n">lambd</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sinh</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">beta</span><span class="o">*</span><span class="n">alpha</span><span class="p">)</span><span class="o">/</span><span class="n">lambd</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cosh</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="n">denominateur</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cosh</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="n">beta</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sinh</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Bi</span><span class="p">,</span><span class="n">k</span><span class="o">*</span><span class="p">(</span><span class="n">numerateur</span><span class="o">/</span><span class="n">denominateur</span><span class="p">)</span><span class="o">*</span><span class="p">((</span><span class="n">lambd</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="n">delta_int</span><span class="p">)</span><span class="o">/</span><span class="n">L_tube</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.gamma1int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gamma1int</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">L_fin</span><span class="p">,</span> <span class="n">lambd</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">delta_int</span><span class="p">,</span> <span class="n">L_tube</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the gamma_1_int factor and returns it</p>
<p>$$
\gamma_{1,int} = rac{lpha}{\lambda}rac{\sinh(lpha L_{fin}/\lambda)}{\cosh(lpha L_{fin}/\lambda)}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>N</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of fins</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>L_fin</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>length of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lambd</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thickness of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>thermal conductivity of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delta</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>width of the fin</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>delta_int</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>contact length between the fin and the tube</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>L_tube</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>length of the tube</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>h</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>heat transfer coefficient</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Bi</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Biot number</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>gamma_1_int</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>gamma_1_int factor</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gamma1int</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">L_fin</span><span class="p">,</span><span class="n">lambd</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">delta</span><span class="p">,</span><span class="n">delta_int</span><span class="p">,</span><span class="n">L_tube</span><span class="p">,</span><span class="n">h</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the gamma_1_int factor and returns it</span>

<span class="sd">    $$</span>
<span class="sd">    \gamma_{1,int} = \frac{\alpha}{\lambda}\frac{\sinh(\alpha L_{fin}/\lambda)}{\cosh(\alpha L_{fin}/\lambda)}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        N (int): number of fins</span>
<span class="sd">        L_fin (float): length of the fin</span>
<span class="sd">        lambd (float): thickness of the fin</span>
<span class="sd">        k (float): thermal conductivity of the fin</span>
<span class="sd">        delta (float): width of the fin</span>
<span class="sd">        delta_int (float): contact length between the fin and the tube</span>
<span class="sd">        L_tube (float): length of the tube</span>
<span class="sd">        h (float): heat transfer coefficient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Bi (float): Biot number</span>
<span class="sd">        gamma_1_int (float): gamma_1_int factor&quot;&quot;&quot;</span>

    <span class="n">Bi</span> <span class="o">=</span> <span class="n">Biot</span><span class="p">(</span><span class="n">lambd</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">delta</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Bi</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">*</span><span class="p">((</span><span class="n">lambd</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="n">delta_int</span><span class="p">)</span><span class="o">/</span><span class="n">L_tube</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">Bi</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">L_fin</span><span class="o">/</span><span class="n">lambd</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">Bi</span><span class="p">)</span><span class="o">/</span><span class="n">lambd</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.gamma_0_int" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gamma_0_int</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the gamma_0_int factor and stores it in var["gamma_0_int"]</p>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gamma_0_int</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the gamma_0_int factor and stores it in var[&quot;gamma_0_int&quot;]&quot;&quot;&quot;</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Bi_f0&quot;</span><span class="p">],</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;gamma_0_int&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gamma0int</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;N_f0&quot;</span><span class="p">],</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;L_f0&quot;</span><span class="p">],</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;lambd_ail&quot;</span><span class="p">],</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;k_ail&quot;</span><span class="p">],</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;delta_f0&quot;</span><span class="p">],</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;delta_f0_int&quot;</span><span class="p">],</span><span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;L_tube&quot;</span><span class="p">],</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_back_fins&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.j" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">j</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the j factor and stores it in var["j"]</p>
<p>$$
j = rac{1}{R_{inter}F'}+rac{1}{R_bF'}-rac{1}{R_{inter}}+rac{h_{rad,f}}{F'}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">j</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the j factor and stores it in var[&quot;j&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    j = \frac{1}{R_{inter}F&#39;}+\frac{1}{R_bF&#39;}-\frac{1}{R_{inter}}+\frac{h_{rad,f}}{F&#39;}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">R_inter</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_inter&quot;</span><span class="p">]</span>
    <span class="n">R_b</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;R_2&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_back&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_back&quot;</span><span class="p">])</span>
    <span class="n">h_rad_tube_abs</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;h_rad_tube_abs&quot;</span><span class="p">]</span>

    <span class="n">Fprime</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Fp&quot;</span><span class="p">]</span>

    <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">Fprime</span><span class="o">*</span><span class="n">R_b</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">R_inter</span><span class="o">*</span><span class="n">Fprime</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="n">R_inter</span>

    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_2&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>

        <span class="n">gamma_int</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;gamma_2_int&quot;</span><span class="p">]</span>

        <span class="n">j</span> <span class="o">+=</span> <span class="p">(</span><span class="n">gamma_int</span><span class="p">)</span><span class="o">/</span><span class="n">Fprime</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;j&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.m" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">m</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Calculates the m factor and stores it in var["m"]</p>
<p>$$
m = \sqrt{rac{F'j}{k_{abs}\lambda_{abs}}}
$$</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">m</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the m factor and stores it in var[&quot;m&quot;]</span>

<span class="sd">    $$</span>
<span class="sd">    m = \sqrt{\frac{F&#39;j}{k_{abs}\lambda_{abs}}}</span>
<span class="sd">    $$</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        var (dict): dictionary containing the variables</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="n">lambd_abs</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;lambd_abs&quot;</span><span class="p">]</span>
    <span class="n">k_abs</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;k_abs&quot;</span><span class="p">]</span>

    <span class="n">Fprime</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;Fp&quot;</span><span class="p">]</span>

    <span class="n">j</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;j&quot;</span><span class="p">]</span>

    <span class="n">m</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">Fprime</span><span class="o">*</span><span class="n">j</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">k_abs</span><span class="o">*</span><span class="n">lambd_abs</span><span class="p">))</span>

    <span class="n">var</span><span class="p">[</span><span class="s2">&quot;m&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.one_loop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">one_loop</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">hyp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Procedure which calculates the variables for one loop</p>
<p>\enumerate{
    \item gamma_{0,int}, gamma_{1,int}, gamma_{2,int}, Bi_{f3}
    \item h_{rad,g}, h_{rad}, h_{top,mean}
    \item a_0, a_1, a_3, a_2
    \item X_{celltemp}, eta_{PV}, S, and S^{*}
    \item F', j, m, b
    \item c_0, c_2, e_1, e_2, e_3, e_4, f_0, b_1, b_2, b_3, b_4
    \item \kappa_{Bt},      heta_{Bt}, \epsilon_{Bt}
    \item d_1, d_2, d_3, d_4
    \item \kappa_{tf},      heta_{tf}, \epsilon_{tf}
    \item a_f and b_f
    \item T_{fluid,out}
    \item q_{tube-fluid}
    \item \overline{T_{fluid}}
    \item \overline{T_{Base}}
    \item \overline{T_{tube}}
    \item \overline{T_{absfin}}
    \item \overline{T_{abs}}
    \item Qdot_{tube-back}
    \item Qdot_{absfin-back}
    \item \overline{T_{ins-tube}}
    \item \overline{T_{ins-absfin}}
    \item \overline{T_{ins}}
    \item Qdot_{ins,conv}
    \item Qdot_{ins,rad}
    \item h_{back,mean}, h_{rad,back}, h_{back,tube}, h_{rad,tube-sky}, h_{rad,back-tube}, h_{back,fins}, h_{rad,f}
    \item \overline{T_{PV}}, \overline{T_{PV,Base}}, \overline{T_{PV,absfin}}
    \item mtemp.T_glass_mean()
    \item mtr.qp_PV_Base()
    \item mtr.qp_Base_back()
    \item mtr.qp_fin()
    \item Cp()
}</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>T_fluid_in</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>fluid inlet temperature</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>var</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the variables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hyp</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the hypothesis</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">one_loop</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Procedure which calculates the variables for one loop</span>

<span class="sd">    \enumerate{</span>
<span class="sd">        \item gamma_{0,int}, gamma_{1,int}, gamma_{2,int}, Bi_{f3}</span>
<span class="sd">        \item h_{rad,g}, h_{rad}, h_{top,mean}</span>
<span class="sd">        \item a_0, a_1, a_3, a_2</span>
<span class="sd">        \item X_{celltemp}, eta_{PV}, S, and S^{*}</span>
<span class="sd">        \item F&#39;, j, m, b</span>
<span class="sd">        \item c_0, c_2, e_1, e_2, e_3, e_4, f_0, b_1, b_2, b_3, b_4</span>
<span class="sd">        \item \kappa_{Bt}, \theta_{Bt}, \epsilon_{Bt}</span>
<span class="sd">        \item d_1, d_2, d_3, d_4</span>
<span class="sd">        \item \kappa_{tf}, \theta_{tf}, \epsilon_{tf}</span>
<span class="sd">        \item a_f and b_f</span>
<span class="sd">        \item T_{fluid,out}</span>
<span class="sd">        \item q_{tube-fluid}</span>
<span class="sd">        \item \overline{T_{fluid}}</span>
<span class="sd">        \item \overline{T_{Base}}</span>
<span class="sd">        \item \overline{T_{tube}}</span>
<span class="sd">        \item \overline{T_{absfin}}</span>
<span class="sd">        \item \overline{T_{abs}}</span>
<span class="sd">        \item Qdot_{tube-back}</span>
<span class="sd">        \item Qdot_{absfin-back}</span>
<span class="sd">        \item \overline{T_{ins-tube}}</span>
<span class="sd">        \item \overline{T_{ins-absfin}}</span>
<span class="sd">        \item \overline{T_{ins}}</span>
<span class="sd">        \item Qdot_{ins,conv}</span>
<span class="sd">        \item Qdot_{ins,rad}</span>
<span class="sd">        \item h_{back,mean}, h_{rad,back}, h_{back,tube}, h_{rad,tube-sky}, h_{rad,back-tube}, h_{back,fins}, h_{rad,f}</span>
<span class="sd">        \item \overline{T_{PV}}, \overline{T_{PV,Base}}, \overline{T_{PV,absfin}}</span>
<span class="sd">        \item mtemp.T_glass_mean()</span>
<span class="sd">        \item mtr.qp_PV_Base()</span>
<span class="sd">        \item mtr.qp_Base_back()</span>
<span class="sd">        \item mtr.qp_fin()</span>
<span class="sd">        \item Cp()</span>
<span class="sd">    }</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        T_fluid_in (float): fluid inlet temperature</span>
<span class="sd">        var (dict): dictionary containing the variables</span>
<span class="sd">        hyp (dict): dictionary containing the hypothesis</span>

<span class="sd">    Returns:</span>
<span class="sd">        None&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_0&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">gamma_0_int</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">var</span><span class="p">[</span><span class="s2">&quot;gamma_0_int&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_1&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">gamma_1_int</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">var</span><span class="p">[</span><span class="s2">&quot;gamma_1_int&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_2&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">gamma_2_int</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">var</span><span class="p">[</span><span class="s2">&quot;gamma_2_int&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_3&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">Bi_f3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="n">mht</span><span class="o">.</span><span class="n">h_rad_g</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="n">mht</span><span class="o">.</span><span class="n">h_rad</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_0&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_1&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;fin_2&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">mht</span><span class="o">.</span><span class="n">h_top_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mht</span><span class="o">.</span><span class="n">h_top_g</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>

    <span class="n">a0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">a1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">a3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">a2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>


    <span class="n">X_celltemp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">eta_PV</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">S</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">S_star</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">Fp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">j</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">m</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">b</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">e0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">e1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">e2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">e3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">e4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">f0</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">b1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">b2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">b3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">b4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">KTE_Bt</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">d1</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">d2</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">d3</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">d4</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">KTE_tf</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">ab_f</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_fluid_out</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtr</span><span class="o">.</span><span class="n">q_tube_fluid</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_fluid_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_Base_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_tube_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_absfin_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_abs_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>


    <span class="n">mtr</span><span class="o">.</span><span class="n">Qdot_tube_back</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtr</span><span class="o">.</span><span class="n">Qdot_absfin_back</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>   
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_ins_tube_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_ins_absfin_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_ins_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">mtr</span><span class="o">.</span><span class="n">Qdot_ins_conv</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtr</span><span class="o">.</span><span class="n">Qdot_ins_rad</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">hyp</span><span class="p">[</span><span class="s2">&quot;calc_h_back_mean&quot;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">mht</span><span class="o">.</span><span class="n">h_back_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mht</span><span class="o">.</span><span class="n">h_back_abs</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>

    <span class="n">mht</span><span class="o">.</span><span class="n">h_rad_back</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="n">mht</span><span class="o">.</span><span class="n">h_back_tube</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="n">mht</span><span class="o">.</span><span class="n">h_rad_tube_sky</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="n">mht</span><span class="o">.</span><span class="n">h_rad_back_tube</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
    <span class="n">mht</span><span class="o">.</span><span class="n">h_back_fins</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>

    <span class="n">mht</span><span class="o">.</span><span class="n">h_rad_tube_abs</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>

    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_PV_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_PV_Base_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_PV_absfin_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtemp</span><span class="o">.</span><span class="n">T_glass_mean</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">mtr</span><span class="o">.</span><span class="n">qp_PV_Base</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtr</span><span class="o">.</span><span class="n">qp_Base_back</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    <span class="n">mtr</span><span class="o">.</span><span class="n">qp_fin</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>

    <span class="n">Cp</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span><span class="n">stepConditions</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">hyp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="model.simu_one_steady_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">simu_one_steady_state</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">hyp</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Procedure which calculates the variables for one steady state</p>
<p>\enumerate{
    \item Initialize the var dictionary with all necessary keys and values
    \item Loop until convergence is reached
    \item Update heat transfer coefficients
    \item Calculate the power balance
    \item Update the fluid inlet temperature
    \item Append the current iteration to the list of iterations
    }</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>componentSpecs</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stepConditions</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the meteo inputs</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>hyp</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary containing the hypothesis</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>slices_df</code></td>            <td>
                  <code>DataFrame</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dataframe containing the variables for each slice of the panel</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>df_one</code></td>            <td>
                  <code>DataFrame</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dataframe containing the variables for the last iteration</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>its_data_list</code></td>            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of dataframes containing the variables for each iteration</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">simu_one_steady_state</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">hyp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Procedure which calculates the variables for one steady state</span>

<span class="sd">    \enumerate{</span>
<span class="sd">        \item Initialize the var dictionary with all necessary keys and values</span>
<span class="sd">        \item Loop until convergence is reached</span>
<span class="sd">        \item Update heat transfer coefficients</span>
<span class="sd">        \item Calculate the power balance</span>
<span class="sd">        \item Update the fluid inlet temperature</span>
<span class="sd">        \item Append the current iteration to the list of iterations</span>
<span class="sd">        }</span>

<span class="sd">    Args:</span>
<span class="sd">        componentSpecs (dict): dictionary containing the parameters</span>
<span class="sd">        stepConditions (dict): dictionary containing the meteo inputs</span>
<span class="sd">        hyp (dict): dictionary containing the hypothesis</span>

<span class="sd">    Returns:</span>
<span class="sd">        slices_df (DataFrame): dataframe containing the variables for each slice of the panel</span>
<span class="sd">        df_one (DataFrame): dataframe containing the variables for the last iteration</span>
<span class="sd">        its_data_list (list): list of dataframes containing the variables for each iteration</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">N_meander</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;N_meander&quot;</span><span class="p">]</span>
    <span class="n">N_harp</span> <span class="o">=</span> <span class="n">componentSpecs</span><span class="p">[</span><span class="s2">&quot;N_harp&quot;</span><span class="p">]</span>
    <span class="n">slices_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">its_data_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">var</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_meander</span><span class="p">):</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">initialize_var</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">hyp</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">compt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;compt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">compt</span>
        <span class="n">its_data</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="n">compt</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;T_PV&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">var</span><span class="p">[</span><span class="s2">&quot;T_PV0&quot;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mf">0.01</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">compt</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Convergence not reached&quot;</span><span class="p">)</span>

            <span class="n">compt</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;compt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">compt</span>

            <span class="n">one_loop</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">hyp</span><span class="p">)</span>
            <span class="n">compute_power</span><span class="p">(</span><span class="n">componentSpecs</span><span class="p">,</span> <span class="n">stepConditions</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

            <span class="n">row_data</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;G&#39;</span><span class="p">:</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;G&quot;</span><span class="p">],</span> <span class="s1">&#39;Gp&#39;</span><span class="p">:</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;Gp&quot;</span><span class="p">],</span><span class="s1">&#39;T_amb&#39;</span><span class="p">:</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_amb&quot;</span><span class="p">],</span> <span class="s1">&#39;T_sky&#39;</span><span class="p">:</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s1">&#39;T_sky&#39;</span><span class="p">],</span> <span class="s1">&#39;T_back&#39;</span><span class="p">:</span><span class="n">stepConditions</span><span class="p">[</span><span class="s1">&#39;T_back&#39;</span><span class="p">],</span> <span class="s1">&#39;T_back_rad&#39;</span><span class="p">:</span><span class="n">stepConditions</span><span class="p">[</span><span class="s1">&#39;T_back_rad&#39;</span><span class="p">],</span> <span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">],</span>
                           <span class="s1">&#39;mdot&#39;</span><span class="p">:</span> <span class="n">stepConditions</span><span class="p">[</span><span class="s1">&#39;mdot&#39;</span><span class="p">],</span><span class="s1">&#39;T_fluid_in&#39;</span><span class="p">:</span><span class="n">stepConditions</span><span class="p">[</span><span class="s1">&#39;T_fluid_in0&#39;</span><span class="p">]},</span> <span class="o">**</span><span class="n">var</span><span class="p">}</span>
            <span class="n">its_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_data</span><span class="p">)</span>

        <span class="c1"># Append only once after the loop</span>
        <span class="n">its_data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">its_data</span><span class="p">))</span>

        <span class="n">slices_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">its_data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">slices_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">slices_data</span><span class="p">)</span>
    <span class="n">df_mean</span> <span class="o">=</span> <span class="n">slices_df</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">df_sum</span> <span class="o">=</span> <span class="n">slices_df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">df_one</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">slices_df</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mdot&#39;</span><span class="p">,</span><span class="s1">&#39;G&#39;</span><span class="p">,</span><span class="s1">&#39;Gp&#39;</span><span class="p">,</span><span class="s1">&#39;T_amb&#39;</span><span class="p">,</span><span class="s1">&#39;T_sky&#39;</span><span class="p">,</span><span class="s1">&#39;T_back&#39;</span><span class="p">,</span><span class="s1">&#39;T_back_rad&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">]:</span>
            <span class="n">df_one</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">stepConditions</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;T_fluid_in&quot;</span><span class="p">:</span>
            <span class="n">df_one</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">stepConditions</span><span class="p">[</span><span class="s2">&quot;T_fluid_in0&quot;</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;T_fluid_out&quot;</span><span class="p">:</span>
            <span class="n">df_one</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">slices_df</span><span class="p">[</span><span class="s2">&quot;T_fluid_out&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">mean_list</span><span class="p">:</span>
            <span class="n">df_one</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">df_mean</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">add_list</span><span class="p">:</span>
            <span class="n">df_one</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">df_sum</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">*</span><span class="n">N_harp</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">slices_df</span><span class="p">,</span> <span class="n">df_one</span><span class="p">,</span> <span class="n">its_data_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/valentindelachaux/PVT-thermal-performance-model" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "navigation.path", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>